<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @recipe.name %>
</p>

<p>
  <strong>Dietaryreqs:</strong>
  <%= @recipe.dietaryreqs %>
</p>

<p>
  <strong>Serving:</strong>
  <%= @recipe.serving %>
</p>


<p>Ingredients for this recipe:</p>
<% @ingredients = [] %>
<% ProductRecipe.all.each do |ingredient| %>
<% if ingredient.recipe_id == @recipe.id %>
<% @ingredients += [ingredient] %>
<%end%>
<%end%>
<table style="margin-left:50px;">
  <thead>
    <tr>
      <th>Name</th>
      <th>Quantity</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @ingredients.each do |item| %>
      <tr>
        <td><%= Product.find_by(:id => item.product_id).name %></td>
        <td><%= item.amount %></td>
        <td>Pick a list: 
          <select onChange="if(this.selectedIndex!=0) self.location=this.options[this.selectedIndex].value">
            <option value="click below">Click one:</option>
            <% @myLists = [] %>
            <% ListUser.all.each do |checklist| %>
            <% if checklist.user_id == session[:user_id] %>
            <% @myLists += [checklist] %>
            <% end %>
            <% end %>
            <% @myLists.each do |listed| %>
              <option value="<%= add_to_list_from_recipe_path(:product_id => item.product_id, :list_id => listed.list_id, :recipe_id => @recipe.id) %>"><%= List.find(listed.list_id).name %></option>
            <% end %>
          </select>
        </td>
        </tr>
        <% end %>
  </tbody>
</table>


<%= link_to 'Edit', edit_recipe_path(@recipe) %> |
<%= link_to 'Back', recipes_path %>





